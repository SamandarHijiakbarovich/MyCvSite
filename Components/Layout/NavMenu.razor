@using Microsoft.AspNetCore.Components.Routing
@using Microsoft.AspNetCore.Components.Web

<div class="nav-sidebar @(IsCollapsed ? "collapsed" : "")">
    @* --- GLOW BACKGROUND DECOR --- *@
    <div class="sidebar-glow"></div>

    @* --- HEADER --- *@
    <div class="nav-header">
        <div class="brand-box">
            <div class="logo-sq">
                <span class="logo-txt">SM</span>
                <div class="logo-ring"></div>
                <div class="logo-core"></div>
            </div>
            @if (!IsCollapsed)
            {
                <div class="brand-meta">
                    <span class="brand-title">SAMANDAR</span>
                    <div class="status-badge">
                        <span class="dot-pulse"></span>
                        <span class="status-txt">QUANTUM ACTIVE</span>
                    </div>
                </div>
            }
        </div>
    </div>

    @* --- NAVIGATION LINKS --- *@
    <div class="nav-scroller">
        <div class="nav-section">
            @if (!IsCollapsed)
            {
                <p class="section-label">COMMAND CENTER</p>
            }

            <NavLink href="" class="menu-item" Match="NavLinkMatch.All" title="@(IsCollapsed ? "Bosh Sahifa" : "")">
                <div class="item-inner">
                    <div class="item-icon">
                        <i class="fas fa-layer-group"></i>
                        <div class="icon-glow"></div>
                    </div>
                    @if (!IsCollapsed)
                    {
                        <div class="item-content">
                            <span class="item-text">Bosh Sahifa</span>
                            <span class="item-sub">System Overview</span>
                        </div>
                    }
                    <div class="active-indicator"></div>
                </div>
            </NavLink>

            <NavLink href="about" class="menu-item" title="@(IsCollapsed ? "Men Haqimda" : "")">
                <div class="item-inner">
                    <div class="item-icon">
                        <i class="fas fa-user-astronaut"></i>
                        <div class="icon-glow"></div>
                    </div>
                    @if (!IsCollapsed)
                    {
                        <div class="item-content">
                            <span class="item-text">Men Haqimda</span>
                            <span class="item-sub">Identity & Bio</span>
                        </div>
                    }
                    <div class="active-indicator"></div>
                </div>
            </NavLink>

            <NavLink href="projects" class="menu-item" title="@(IsCollapsed ? "Loyihalar" : "")">
                <div class="item-inner">
                    <div class="item-icon">
                        <i class="fas fa-code-branch"></i>
                        <div class="icon-glow"></div>
                    </div>
                    @if (!IsCollapsed)
                    {
                        <div class="item-content">
                            <span class="item-text">Loyihalar</span>
                            <span class="item-sub">Source Works</span>
                        </div>
                    }
                    <div class="active-indicator"></div>
                </div>
            </NavLink>

            <NavLink href="services" class="menu-item" title="@(IsCollapsed ? "Xizmatlar" : "")">
                <div class="item-inner">
                    <div class="item-icon">
                        <i class="fas fa-handshake"></i> @* Yoki fa-concierge-bell *@
                        <div class="icon-glow"></div>
                    </div>
                    @if (!IsCollapsed)
                    {
                        <div class="item-content">
                            <span class="item-text">Xizmatlar</span>
                            <span class="item-sub">Solutions & Help</span>
                        </div>
                    }
                    <div class="active-indicator"></div>
                </div>
            </NavLink>

            <NavLink href="skills" class="menu-item" title="@(IsCollapsed ? "Ko'nikmalar" : "")">
                <div class="item-inner">
                    <div class="item-icon">
                        <i class="fas fa-atom"></i>
                        <div class="icon-glow"></div>
                    </div>
                    @if (!IsCollapsed)
                    {
                        <div class="item-content">
                            <span class="item-text">Ko'nikmalar</span>
                            <span class="item-sub">Intelligence</span>
                        </div>
                    }
                    <div class="active-indicator"></div>
                </div>
            </NavLink>

            <NavLink href="contact" class="menu-item" title="@(IsCollapsed ? "Aloqa" : "")">
                <div class="item-inner">
                    <div class="item-icon">
                        <i class="fas fa-broadcast-tower"></i>
                        <div class="icon-glow"></div>
                    </div>
                    @if (!IsCollapsed)
                    {
                        <div class="item-content">
                            <span class="item-text">Aloqa</span>
                            <span class="item-sub">Establish Link</span>
                        </div>
                    }
                    <div class="active-indicator"></div>
                </div>
            </NavLink>
        </div>
    </div>

    @* --- FOOTER --- *@
    <div class="nav-footer">
        <div class="sys-card">
            <div class="sys-icon-box">
                <i class="fas fa-shield-alt"></i>
            </div>
            @if (!IsCollapsed)
            {
                <div class="sys-info">
                    <span class="sys-ver">CORE V2.5.0</span>
                    <span class="sys-status">ENCRYPTED</span>
                </div>
                <div class="sys-stat-chart">
                    <div class="bar bar-1"></div>
                    <div class="bar bar-2"></div>
                    <div class="bar bar-3"></div>
                </div>
            }
        </div>
    </div>
</div>

<style>
    :root {
        --side-bg: #050811;
        --accent: #6366f1;
        --accent-glow: rgba(99, 102, 241, 0.3);
        --accent-grad: linear-gradient(135deg, #6366f1 0%, #a855f7 100%);
        --text-p: #f8fafc;
        --text-s: #64748b;
        --glass: rgba(255, 255, 255, 0.02);
        --border: rgba(255, 255, 255, 0.06);
        --trans: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
    }

    .nav-sidebar {
        height: 100vh;
        width: 280px;
        background: var(--side-bg);
        border-right: 1px solid var(--border);
        display: flex;
        flex-direction: column;
        transition: var(--trans);
        position: relative;
        z-index: 10;
    }

    /* Background Blur Effect */
    .sidebar-glow {
        position: absolute;
        top: 20%;
        left: -50px;
        width: 100px;
        height: 200px;
        background: var(--accent);
        filter: blur(80px);
        opacity: 0.1;
        pointer-events: none;
    }

    /* Logo Styling */
    .logo-sq {
        width: 45px;
        height: 45px;
        background: #000;
        border-radius: 14px;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        border: 1px solid var(--border);
    }

    .logo-core {
        position: absolute;
        width: 60%;
        height: 60%;
        background: var(--accent-grad);
        filter: blur(10px);
        opacity: 0.5;
        z-index: 1;
    }

    .logo-txt {
        position: relative;
        z-index: 2;
        font-weight: 900;
        letter-spacing: -1px;
    }

    /* Menu Items */
    .menu-item {
        text-decoration: none;
        display: block;
        margin: 4px 0;
        position: relative;
    }

    .item-inner {
        display: flex;
        align-items: center;
        padding: 14px 18px;
        margin: 0 12px;
        border-radius: 16px;
        gap: 16px;
        transition: var(--trans);
        background: transparent;
        border: 1px solid transparent;
    }

    .item-icon {
        width: 42px;
        height: 42px;
        min-width: 42px;
        background: var(--glass);
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--text-s);
        font-size: 1.1rem;
        position: relative;
        border: 1px solid var(--border);
        transition: var(--trans);
    }

    .icon-glow {
        position: absolute;
        inset: 0;
        background: var(--accent);
        filter: blur(12px);
        opacity: 0;
        transition: var(--trans);
    }

    .menu-item:hover .item-inner {
        background: rgba(255, 255, 255, 0.03);
        transform: translateX(5px);
    }

    /* Active State (The "Wow" Factor) */
    .menu-item.active .item-inner {
        background: rgba(99, 102, 241, 0.08);
        border-color: rgba(99, 102, 241, 0.2);
    }

    .menu-item.active .item-icon {
        background: var(--accent-grad);
        color: white;
        border-color: transparent;
        transform: scale(1.1);
    }

    .menu-item.active .icon-glow {
        opacity: 0.4;
    }

    .active-indicator {
        position: absolute;
        left: -12px;
        width: 4px;
        height: 0;
        background: var(--accent-grad);
        border-radius: 0 4px 4px 0;
        transition: var(--trans);
        box-shadow: 2px 0 10px var(--accent-glow);
    }

    .menu-item.active .active-indicator {
        height: 25px;
    }

    /* Footer System Card */
    .sys-card {
        background: rgba(0, 0, 0, 0.4);
        border: 1px solid var(--border);
        border-radius: 20px;
        padding: 14px;
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .sys-icon-box {
        width: 35px;
        height: 35px;
        background: var(--glass);
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--accent);
    }

    .sys-stat-chart {
        display: flex;
        align-items: flex-end;
        gap: 3px;
        height: 15px;
        margin-left: auto;
    }

    .bar {
        width: 3px;
        background: var(--accent);
        border-radius: 2px;
        animation: barGrow 1.5s infinite ease-in-out;
    }

    .bar-1 {
        height: 60%;
        animation-delay: 0.1s;
    }

    .bar-2 {
        height: 100%;
        animation-delay: 0.3s;
    }

    .bar-3 {
        height: 40%;
        animation-delay: 0.5s;
    }

    /* Collapsed State */
    .collapsed {
        width: 100px;
    }

        .collapsed .item-inner {
            justify-content: center;
            margin: 0 10px;
            padding: 14px 0;
        }

        .collapsed .active-indicator {
            left: -10px;
        }

    /* Animations */
  

    {
        transform: rotate(0deg);
    }

    to {
        transform: rotate(360deg);
    }

    }

    .logo-ring {
        animation: spin 10s linear infinite;
    }

    /* Dot Pulse */
    .dot-pulse {
        width: 6px;
        height: 6px;
        background: #10b981;
        border-radius: 50%;
        box-shadow: 0 0 8px #10b981;
        animation: pulse 2s infinite;
    }

    
</style>

@code {
    [Parameter] public bool IsCollapsed { get; set; } = false;
}